name: Testes Unit√°rios
on:
  pull_request:
    branches:
      - master
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout c√≥digo
        uses: actions/checkout@v2

      - name: Instalar depend√™ncias
        run: npm install

      - name: Executar testes
        id: test
        run: npm test

      - name: Notificar sucesso
        if: success()  # Este passo ser√° executado apenas se os testes passarem
        run: |
          curl -X POST -H 'Content-type: application/json' --data '{
            "text": "‚úÖ Todos os testes passaram no reposit√≥rio Sistema de Login em pull request #${{ github.event.pull_request.number }}. √ìtimo trabalho!"
          }' 

      - name: Notificar falha
        if: failure()  # Este passo ser√° executado apenas se os testes falharem
        run: |
          curl -X POST -H 'Content-type: application/json' --data '{
            "text": "üö® Os testes falharam no reposit√≥rio Sistema de Login em pull request #${{ github.event.pull_request.number }}. Confira os logs para mais detalhes."
          }' 